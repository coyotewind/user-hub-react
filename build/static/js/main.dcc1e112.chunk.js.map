{"version":3,"sources":["components/Header.js","auth/index.js","components/UserPosts.js","components/UserTodos.js","api/index.js","index.js"],"names":["Header","currentUser","setCurrentUser","userList","useState","selectedUser","setSelectedUser","useEffect","className","onSubmit","event","preventDefault","to","activeClssName","activeClassName","onClick","localStorage","removeItem","username","onChange","id","target","value","user","find","map","key","setItem","JSON","stringify","UserPosts","userPosts","title","body","UserTodos","userTodos","completed","style","textDecoration","BASE","a","axios","get","data","userId","App","setUserList","parse","getItem","setUserPosts","setUserTodos","getUsers","then","users","catch","error","getPostsByUser","posts","getTodosByUser","todos","path","exact","padding","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.dcc1e112.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { NavLink } from 'react-router-dom';\nimport { storeCurrentUser, clearCurrentUser } from '../auth';\nimport './Header.css';\n\nfunction Header({ currentUser, setCurrentUser, userList }) {\n    \n    const [selectedUser, setSelectedUser] = useState();\n\n    useEffect(() => {\n        setSelectedUser(userList[0]);\n      }, [userList]);\n\n    const handleSubmit = (event) => { \n        event.preventDefault(); \n    };\n\n    const handleSelectChange = (event) => {\n        const id = event.target.value;\n        const user = userList.find(user => { \n            return user.id == id\n        });\n        setSelectedUser(user);\n    };\n\n    const handleUserLogin = (event) => {\n        storeCurrentUser(selectedUser);\n        setCurrentUser(selectedUser);\n    };\n\n    const handleUserLogout = (event) => {\n        setSelectedUser(userList[0]);\n        clearCurrentUser(); // NEW\n        setCurrentUser(null);\n    };\n\n    return (\n        <header>\n            <h1>Welcome to UserHub</h1>\n            <form className='user-select' onSubmit={handleSubmit}>\n                {\n                    currentUser\n                    ? <div>\n                        <NavLink to=\"/posts\" activeClssName=\"current\">Posts</NavLink>\n                        <NavLink to=\"todos\" activeClassName=\"current\">Todos</NavLink>\n                        <button onClick={ handleUserLogout }>Log Out, { currentUser.username }</button>\n                    </div>\n                    : <div>\n                        <select onChange={ handleSelectChange }>\n                            {userList.map((user) => (\n                                <option key={ user.id } value={ user.id }>{ user.username }</option>\n                            ))}\n                        </select>\n                        <button onClick={handleUserLogin}>LOG IN</button>\n                    </div>\n                }\n            </form>\n        </header>\n    );\n\n};\n\nexport default Header;\n","export function storeCurrentUser(user) {\n    localStorage.setItem('currentUser', JSON.stringify(user));\n}\n  \nexport function getCurrentUser() {\n    const user = JSON.parse(localStorage.getItem('currentUser'));\n    return user;\n}\n  \nexport function clearCurrentUser() {\n    localStorage.removeItem('currentUser');\n}","import React from 'react';\n\nimport './UserPosts.css';\n\nfunction UserPosts ({ currentUser, userPosts }) {\n  return (\n      <div className='user-posts'>\n          <h2>Posts By {currentUser.username}</h2>\n          {\n            userPosts.map( function ({ id, title, body }) { \n                return <div key={id} className='post'>\n                    <h3>{title}</h3>\n                    <p>{body}</p>\n                </div>\n            })\n          }\n      </div>\n  );\n}\n\nexport default UserPosts;","import React from 'react';\nimport './UserTodos.css';\n\nfunction UserTodos({ currentUser, userTodos }) {\n    return (\n        <div className='user-todos'>\n            <h2>Todos By {currentUser.username}</h2>\n            {userTodos.map(({ id, title, completed }) => (\n                <div key={id} className='todo'>\n                    <h3 style={{ textDecoration: completed ? 'line-through' : 'none', }}>{title}</h3>\n                </div>\n            ))}\n        </div>\n    );\n}\n\nexport default UserTodos;","import axios from 'axios';\n\nconst BASE = 'https://jsonplace-univclone.herokuapp.com';\n\nexport async function getUsers() {\n    try {\n        const { data } = await axios.get(`${BASE}/users`);\n        return data;\n    } catch (error) {\n        throw error;\n    }\n}\n\nexport async function getPostsByUser(userId) {\n    try {\n        const { data } = await axios.get(`${BASE}/users/${userId}/posts`);\n        return data;\n    } catch (error) {\n        throw error;\n    }\n}\n\nexport async function getTodosByUser(userId) {\n    try {\n        const { data } = await axios.get(`${BASE}/users/${userId}/todos`);\n        return data;\n    } catch (error) {\n        throw error;\n    }\n}\n","import React, { useEffect, useState } from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { BrowserRouter as Router, Route, Switch, Redirect } from 'react-router-dom';\n\nimport { Header, UserPosts , UserTodos } from './components'\nimport { getUsers, getPostsByUser, getTodosByUser } from './api/index.js'\n\nimport { getCurrentUser } from './auth';\n\nconst App = () => {\n    const [userList, setUserList] = useState([]);\n    const [currentUser, setCurrentUser] = useState(getCurrentUser()); \n    const [userPosts, setUserPosts] = useState([]); \n    const [userTodos, setUserTodos] = useState([]); \n    \n    // this is new\n\n    useEffect(() => {\n        getUsers()\n            .then((users) => {\n                setUserList(users);\n            })\n            .catch((error) => {\n                // something something errors\n            });\n    }, []);\n\n    useEffect( () => {\n        if (!currentUser) {\n            setUserPosts([]);\n            return;\n        } else {\n            getPostsByUser(currentUser.id)\n            .then(posts => {\n                setUserPosts(posts);\n            })\n            .catch(error => {\n                // something something error\n            })\n\n            getTodosByUser(currentUser.id)\n            .then (todos => {\n                setUserTodos(todos);\n            })\n            .catch(error => {\n                // something something error\n            })\n        }\n    }, [currentUser]);    \n\n    return (\n        <Router>\n        <div id='App'>\n            <Header \n                userList={userList} \n                currentUser={currentUser}\n                setCurrentUser={setCurrentUser}\n            />\n            {   \n            currentUser\n            ? <div>\n            <Switch>\n                <Route path=\"/posts\">\n                    <UserPosts\n                        userPosts={userPosts}\n                        currentUser={currentUser}\n                    />\n                </Route>\n                <Route>\n                <UserTodos\n                    userTodos={userTodos}\n                    currentUser={currentUser}\n                />\n                </Route>\n                <Route exact path=\"/\">\n                <h2 style={{ padding: \".5em\" }}>Welcome, { currentUser.username }!</h2>\n                </Route>\n                <Redirect to=\"/\" />\n            </Switch>\n            </div>\n            : \n            <div>\n                <Switch>\n                    <Route exact path=\"/\">\n                    <h2 style={{\n                        padding: \".5em\"\n                    }}>Please log in, above.</h2>\n                    </Route>\n                    <Redirect to=\"/\" />\n                </Switch>\n            </div>\n            }\n        </div>\n        </Router>\n    );\n};\n\nReactDOM.render(\n    <App />, \n    document.getElementById('root')\n);\n"],"sourceRoot":""}